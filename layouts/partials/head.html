<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>{{ if and .Title (ne .Title "") }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}</title>

{{/* Description fallback: page -> site.params -> site.title */}}
{{ if .Params.summary }}
  <meta name="description" content="{{ .Params.summary }}">
{{ else if .Site.Params.summary }}
  <meta name="description" content="{{ .Site.Params.summary }}">
{{ else }}
  <meta name="description" content="{{ .Site.Title }}">
{{ end }}

{{/* Canonical */}}
<link rel="canonical" href="{{ .Permalink }}">

{{/* Favicon */}}
<link rel="icon" href="{{ "favicon.ico" | relURL }}" type="image/x-icon">

{{/* Tailwind CSS */}}
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

<link rel="stylesheet" href="{{ "css/styles.css" | relURL }}">

{{ if .Params.noindex }}
  <meta name="robots" content="noindex, nofollow">
{{ end }}

{{/* Open Graph */}}
<meta property="og:title" content="{{ .Title | default .Site.Title }}">
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
{{ if .Params.summary }}
  <meta property="og:description" content="{{ .Params.summary }}">
{{ else if .Site.Params.summary }}
  <meta property="og:description" content="{{ .Site.Params.summary }}">
{{ end }}
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="{{ .Site.LanguageCode | default "en_US" }}">

{{ if .Params.og_image }}
  <meta property="og:image" content="{{ .Params.og_image | absURL }}">
{{ else if .Params.header }}
  <meta property="og:image" content="{{ .Params.header | absURL }}">
{{ else if .Site.Params.og_image }}
  <meta property="og:image" content="{{ .Site.Params.og_image | absURL }}">
{{ end }}

{{/* Twitter */}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ .Title | default .Site.Title }}">
{{ if .Params.summary }}
  <meta name="twitter:description" content="{{ .Params.summary }}">
{{ else if .Site.Params.summary }}
  <meta name="twitter:description" content="{{ .Site.Params.summary }}">
{{ end }}

{{ if .Params.og_image }}
  <meta name="twitter:image" content="{{ .Params.og_image | absURL }}">
{{ else if .Params.header }}
  <meta name="twitter:image" content="{{ .Params.header | absURL }}">
{{ else if .Site.Params.og_image }}
  <meta name="twitter:image" content="{{ .Site.Params.og_image | absURL }}">
{{ end }}

{{ if .Site.Params.theme_color }}
<meta name="theme-color" content="{{ .Site.Params.theme_color }}">
{{ end }}

{{ block "head_extra" . }}{{ end }}
